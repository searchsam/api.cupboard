
type Order @model {
    id: ID!
    status: Int!
    deadline: DateTime!
    created_at: DateTime!
    updated_at: DateTime!
    user: User! @belongsTo
    calls: [Call!]! @hasMany
}

enum OrderStatus {
    INACTIVE @enum(value: 0)
    ACTIVE @enum(value: 1)
}

input CreateOrderInput {
    status: Int!
    deadline: Date!
    user: CreateUserRelation
}

input CreateUserRelation {
    connect: ID! @globalId(decode: "ID")
}

extend type Query {
    orders: [Order!]! @all
    order(id: ID! @eq): Order! @find
    activeOrders(status: Int! @eq): [Order!]! @all
}

extend type Mutation {
    createOrder(input: CreateOrderInput! @spread): Order! @create
}
